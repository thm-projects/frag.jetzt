<mat-toolbar class="mat-elevation-z2">
  <mat-toolbar-row

    [ngClass]="{'mat-toolbar-moderation': router.url.endsWith('/moderator/comments')}">

    <button id="back-button"
            mat-icon-button
            aria-labelledby="back-label"
            *ngIf="router.url !== '/home'"
            (click)="goBack()">
      <mat-icon class="header-icons">arrow_back</mat-icon>
    </button>

    <ng-container *ngIf="toggleUserActivity">
      <div class="userActivityIcon"></div>
      <p class="userActivityTxt">{{userActivity}}</p>
    </ng-container>

    <span class="fill-remaining-space"
          *ngIf="router.url.endsWith('/moderator/comments')"></span>

    <h2 class="oldtypo-h2"
        *ngIf="router.url.endsWith('/moderator/comments') && deviceType === 'desktop'">
      {{'header.moderation-warning'|translate}}
    </h2>

    <span class="fill-remaining-space"></span>

    <h2 class="oldtypo-h2"
        *ngIf="deviceType === 'desktop' && router.url !== '/home'">
      {{cTime}}
    </h2>

    <span class="fill-remaining-space"
          *ngIf="room && room.questionsBlocked"></span>

    <h1
      *ngIf="room && room.questionsBlocked">
      {{'header.questions-blocked'|translate}}
    </h1>

    <!--Topic Cloud-->
    <div class="topic-cloud-btns"
         [ngClass]="{'noOfQuestions': deviceType === 'desktop'}"
         *ngIf="router.url.includes('tagcloud')"
         ars-flex-box>
      <ars-col
        [xp]="16"
        [extra]="true">
        <button mat-icon-button
                *ngIf="isAdminConfigEnabled"
                class="pseudo-button"
                matRipple
                matTooltip="{{'header.overview-admin-config-enabled' | translate}}">
          <mat-icon class="oldtypo-h2 comment_tag-icon"
                    style="color: red !important;">warning
          </mat-icon>
        </button>
        <button mat-icon-button
                class="pseudo-button"
                matRipple
                matTooltip="{{'header.overview-question-tooltip' | translate}}">
          <mat-icon class="oldtypo-h2 comment_tag-icon">comment</mat-icon>
          <span style="margin-left: 0.25em;">{{commentsCountQuestions}}</span>
        </button>
        <button mat-icon-button
                class="pseudo-button"
                matRipple
                matTooltip="{{'header.overview-questioners-tooltip' | translate}}">
          <mat-icon class="oldtypo-h2 comment_tag-icon">person</mat-icon>
          <span style="margin-left: 0.25em;">{{commentsCountUsers}}</span>
        </button>
        <button mat-icon-button
                class="pseudo-button"
                matRipple
                matTooltip="{{'header.overview-keywords-tooltip' | translate}}">
          <mat-icon svgIcon="hashtag"
                    class="oldtypo-h2 comment_tag-icon"></mat-icon>
          <span style="margin-left: 0.25em;">{{commentsCountKeywords}}</span>
        </button>
      </ars-col>
    </div>

    <!--Feedback im HÃ¶rsaal-->
    <h2 class="header-slogan-mobile"
        *ngIf="router.url.includes('home') && deviceType === 'mobile'"
        fxLayoutAlign="center center">
      {{ 'header.home-header-mobile' | translate }}
    </h2>

    <h2 class="header-slogan-desktop"
        *ngIf="router.url.includes('home') && deviceType === 'desktop'"
        fxLayoutAlign="center center">
      {{ 'header.home-header' | translate }}
    </h2>

    <span class="fill-remaining-space"></span>

    <mat-menu #userMenu="matMenu"
              [overlapTrigger]="false">
      <!--      <p class="mat-menu-inner-title">Account</p>-->

      <div class="mat-menu-inner-box">

        <!-- Home -->
        <ng-container *ngIf="router.url.endsWith('/home')">
        </ng-container>

        <!-- Session list -->
        <ng-container *ngIf="router.url.endsWith('/user')">
        </ng-container>

        <!-- Room -->
        <ng-container *ngIf="router.url.includes('/room/')">

          <!-- Room General Options - top -->

          <!-- Moderator board / index -->

          <ng-container
            *ngIf="user && user.role > 0 && (router.url.endsWith('/moderator/comments') || router.url.includes('/comment/'))">

            <button mat-menu-item
                    tabindex="0"
                    *ngIf="user.role == 3"
                    routerLink="creator/room/{{shortId}}/comments">
              <mat-icon>
                forum
              </mat-icon>
              <span>{{'header.back-to-questionboard' | translate}}</span>
            </button>

            <button mat-menu-item
                    tabindex="0"
                    *ngIf="user.role > 0 && user.role < 3"
                    routerLink="moderator/room/{{shortId}}/comments">
              <mat-icon>
                forum
              </mat-icon>
              <span>{{'header.back-to-questionboard' | translate}}</span>
            </button>

          </ng-container>

          <ng-container *ngIf="user && user.role == 0 && router.url.includes('/comment/')">

            <button mat-menu-item
                    tabindex="0"
                    routerLink="participant/room/{{shortId}}/comments">
              <mat-icon>
                forum
              </mat-icon>
              <span>{{'header.back-to-questionboard' | translate}}</span>
            </button>

          </ng-container>

          <!-- Question board -->
          <ng-container *ngIf="router.url.endsWith('/comments')">

            <ng-container>

              <button mat-menu-item
                      *ngIf="user && user.role > 0 && !router.url.includes('/comment/') && !router.url.endsWith('/tagcloud') && !router.url.endsWith('moderator/comments')"
                      tabindex="0"
                      (click)="showQRDialog();">
                <mat-icon svgIcon="qrcode"
                          class="header-icons qrcode">
                </mat-icon>
                <span>{{'header.room-qr' | translate}}</span>
              </button>

              <button mat-menu-item
                      tabindex="0"
                      *ngIf="user && user.role > 0 && !router.url.includes('/participant/') && !router.url.endsWith('moderator/comments')"
                      routerLink="moderator/room/{{shortId}}/moderator/comments">
                <mat-icon>
                  visibility_off
                </mat-icon>
                <span>{{'header.moderationboard' | translate}}</span>
              </button>

              <button mat-menu-item
                      tabindex="0"
                      *ngIf="user && user.role >0 && deviceType !== 'mobile' && !router.url.endsWith('moderator/comments')"
                      routerLink="participant/room/{{shortId}}/comments/questionwall">
                <mat-icon class="beamer-icon"
                          svgIcon="beamer">
                </mat-icon>
                <span>{{'header.questionwall' | translate}}</span>
              </button>

              <button mat-menu-item
                      tabindex="0"
                      *ngIf="!router.url.endsWith('moderator/comments')"
                      (click)="navigateTopicCloud()">
                <mat-icon>cloud
                </mat-icon>
                <span>{{'header.tag-cloud' | translate}}</span>
              </button>

              <button mat-menu-item
                      tabindex="0"
                      *ngIf="!router.url.endsWith('moderator/comments')"
                      routerLink="quiz">
                <mat-icon>school
                </mat-icon>
                <span>{{'header.quiz-now' | translate}}</span>
              </button>

            </ng-container>
            <ng-container *ngIf="router.url.includes('/participant/room/')">
            </ng-container>
            <ng-container *ngIf="router.url.includes('/moderator/room/')">
            </ng-container>
            <ng-container *ngIf="router.url.includes('/creator/room/')">
            </ng-container>

          </ng-container>

          <!-- Session -->
          <ng-container *ngIf="!router.url.endsWith('/comments') && !router.url.includes('/comment/') && !router.url.endsWith('tagcloud')">

            <!-- app-room-participant-page -->
            <ng-container *ngIf="router.url.includes('/participant/room/')">
            </ng-container>
            <!-- app-room-creator-page -->
            <ng-container *ngIf="router.url.includes('/moderator/room/')">
            </ng-container>

            <!-- app-room-creator-page -->

            <ng-container *ngIf="router.url.includes('/creator/room/')">

              <button mat-menu-item
                      (click)="navigateModerator()"
                      tabindex="0">
                <mat-icon>flag</mat-icon>
                <span>{{'header.edit-session-description' | translate}}</span>
              </button>

              <button mat-menu-item
                      *ngIf="user"
                      (click)="navigateModerator()"
                      tabindex="0">
                <mat-icon class="gavel">visibility_off</mat-icon>
                <span>{{'header.moderation-mode' | translate}}</span>
              </button>

            </ng-container>

          </ng-container>

          <!-- Room General Options - bot -->

          <ng-container
            *ngIf="user && user.role == 3 && !router.url.includes('/participant') && !router.url.endsWith('/comments') && !router.url.includes('/comment/') && !router.url.endsWith('tagcloud')">

            <button mat-menu-item
                    (click)="navigateModerator()"
                    tabindex="0">
              <mat-icon>gavel</mat-icon>
              <span>{{'header.edit-moderator' | translate}}</span>
            </button>

            <button mat-menu-item
                    (click)="navigateTags()"
                    tabindex="0">
              <mat-icon svgIcon="comment_tag"></mat-icon>
              <span>{{'header.edit-tags' | translate}}</span>
            </button>

            <button mat-menu-item
                    *ngIf="user"
                    (click)="navigateRoomBonusToken()"
                    tabindex="0">
              <mat-icon class="star">grade</mat-icon>
              <span>{{'header.bonustoken' | translate}}</span>
            </button>

            <button mat-menu-item
                    (click)="navigateExportQuestions()"
                    tabindex="0">
              <mat-icon>file_download</mat-icon>
              <span>{{'header.export-questions' | translate}}</span>
            </button>

            <button mat-menu-item
                    (click)="navigateModerator()"
                    tabindex="0">
              <mat-icon>clear</mat-icon>
              <span>{{'header.profanity-filter' | translate}}</span>
            </button>

          </ng-container>

          <button mat-menu-item
                  tabindex="0"
                  *ngIf="router.url.endsWith('/tagcloud')"
                  routerLink="participant/room/{{shortId}}/comments">
            <mat-icon>
              forum
            </mat-icon>
            <span>{{'header.back-to-questionboard' | translate}}</span>
          </button>

          <button mat-menu-item
                  *ngIf="user && user.role >0 && router.url.endsWith('/tagcloud')"
                  tabindex="0"
                  (click)="navigateTopicCloudConfig()">
            <mat-icon aria-label="Configuration Icon">cloud</mat-icon>
            <span>{{'header.tag-cloud-config' | translate}}</span>
          </button>

          <button mat-menu-item
                  *ngIf="user && user.role >0 && router.url.endsWith('/tagcloud')"
                  tabindex="0"
                  (click)="navigateTopicCloudAdministration()">
            <mat-icon aria-hidden="false"
                      aria-label="Control Icon">cloud
            </mat-icon>
            <span>{{'header.tag-cloud-administration' | translate}}</span>
          </button>


          <button mat-menu-item
                  tabindex="0"
                  *ngIf="user && user.role > 0 && router.url.endsWith('/tagcloud')"
                  (click)="startWorkerDialog()">
            <mat-icon>update
            </mat-icon>
            <span>{{'header.update-spacy-keywords' | translate}}</span>
          </button>

          <button mat-menu-item
                  *ngIf="router.url.endsWith('/comments') && !router.url.includes('/comment/') && !router.url.endsWith('tagcloud')"
                  (click)="navigateExportQuestions()"
                  tabindex="0">
            <mat-icon>file_download</mat-icon>
            <span>{{'header.export-questions' | translate}}</span>
          </button>

          <button mat-menu-item
                  tabindex="0"
                  *ngIf="user && user.role == 3 && !router.url.includes('/participant') && !router.url.endsWith('/comments') && !router.url.includes('/comment/') && !router.url.endsWith('tagcloud')"
                  (click)="blockQuestions()"
                  [ngClass]="{'color-warn': room && room.questionsBlocked}"
          >
            <mat-icon class="color-warn">block</mat-icon>
            <span *ngIf="room && !room.questionsBlocked">{{'header.block' | translate}}</span>
            <span *ngIf="room && room.questionsBlocked">{{'header.unlock' | translate}}</span>
          </button>

          <button mat-menu-item
                  *ngIf="user && user.role == 3 && !router.url.includes('/participant') && !router.url.endsWith('/comments') && !router.url.includes('/comment/') && !router.url.endsWith('tagcloud')"
                  (click)="navigateDeleteQuestions()"
                  tabindex="0">
            <mat-icon class="color-warn">delete_sweep</mat-icon>
            <span>{{'header.delete-questions' | translate}}</span>
          </button>

          <button mat-menu-item
                  *ngIf="user && user.role == 3 && !router.url.includes('/participant') && !router.url.endsWith('/comments') && !router.url.includes('/comment/') && !router.url.endsWith('tagcloud')"
                  (click)="delete()"
                  tabindex="0">
            <mat-icon class="color-warn">delete</mat-icon>
            <span>{{'header.delete-room' | translate}}</span>
          </button>

        </ng-container>

      </div>

      <!-- General Options -->

      <button mat-menu-item
              *ngIf="user && user.role == 0 && !router.url.endsWith('/tagcloud') && !router.url.endsWith('/quiz')"
              (click)="openUserBonusTokenDialog()"
              tabindex="0">
        <mat-icon class="star">grade</mat-icon>
        <span>{{'header.user-bonus-token' | translate}}</span>
      </button>



      <ng-container *ngIf="router.url.endsWith('/comments') || router.url.endsWith('/tagcloud')">

        <button mat-menu-item
                *ngIf="user && user.role == 0"
                tabindex="0"
                routerLink="participant/room/{{shortId}}">
          <mat-icon>
            flag
          </mat-icon>
          <span>{{'header.back-to-room' | translate}}</span>
        </button>

        <button mat-menu-item
                *ngIf="user && user.role == 3"
                tabindex="0"
                routerLink="creator/room/{{shortId}}">
          <mat-icon>
            settings
          </mat-icon>
          <span>{{'header.back-to-room-creator' | translate}}</span>
        </button>

        <button mat-menu-item
                *ngIf="user && user.role == 2"
                tabindex="0"
                routerLink="moderator/room/{{shortId}}">
          <mat-icon>
            flag
          </mat-icon>
          <span>{{'header.back-to-room-moderator' | translate}}</span>
        </button>

      </ng-container>

      <button mat-menu-item
              *ngIf="user && router.url.endsWith('/quiz')"
              tabindex="0"
              (click)="goBack()">
        <mat-icon class="header-icons">forum</mat-icon>
        <span>{{'header.back-to-questionboard' | translate}}</span>
      </button>

      <button mat-menu-item
              *ngIf="user && !router.url.endsWith('/user')"
              routerLink="/user"
              tabindex="0">
        <mat-icon svgIcon="meeting_room"
                  class="sessions"></mat-icon>
        <span *ngIf="!user.isGuest">{{'header.my-sessions' | translate}}</span>
        <span *ngIf="user.isGuest"
              svgIcon="meeting_room">{{'header.visited-sessions' | translate}}</span>
      </button>

      <button mat-menu-item
              aria-hidden="true"
              *ngIf="isSafari === 'false'  && !router.url.includes('home')  && !router.url.endsWith('/quiz')"
              (click)="getRescale().toggleState();">
        <mat-icon class="fullscreen"
                  (click)="getRescale().toggleState();">format_size
        </mat-icon>
        <span>{{'header.fullscreen' | translate}}</span>
      </button>

      <button mat-menu-item
              *ngIf="user"
              (click)="showMotdDialog()">
        <mat-icon class="faq">
          {{ motdState ? 'notifications_active' : 'help' }}
        </mat-icon>
        <span>{{'header.motd' | translate}}</span>
      </button>



      <button mat-menu-item
              *ngIf="user && !user.isGuest && user.loginId && router.url.endsWith('/user')"
              (click)="openDeleteUserDialog()"
              tabindex="0">
        <mat-icon class="color-warn">delete_forever</mat-icon>
        <span>{{'header.delete-account' | translate}}</span>
      </button>

      <button mat-menu-item
              (click)="logout()"
              tabindex="0">
        <mat-icon class="color-warn">exit_to_app</mat-icon>
        <span>{{ 'header.logout' | translate }}</span>
      </button>

    </mat-menu>

    <button [disabled]="cookiesDisabled()"
            mat-button
            *ngIf="user && deviceType === 'desktop'"
            [matMenuTriggerFor]="userMenu"
            aria-labelledby="session-label"
            id="session-button">
      <div class="label-icon">
        <mat-icon *ngIf="!user.isGuest"
                  class="header-icons">more_vert
        </mat-icon>
        <mat-icon *ngIf="user.isGuest"
                  svgIcon="meeting_room"
                  class="header-icons"></mat-icon>
        <h2 class="oldtypo-h2"
            *ngIf="!user.isGuest">{{'header.my-account' | translate}}</h2>
        <!--Guest Account-->
        <h2 class="oldtypo-h2"
            *ngIf="user.isGuest">{{'header.my-guest-account' | translate}}</h2>
      </div>
    </button>

    <button [disabled]="cookiesDisabled()"
            mat-icon-button
            *ngIf="user && deviceType === 'mobile'"
            [matMenuTriggerFor]="userMenu"
            aria-labelledby="session-label">
      <mat-icon *ngIf="!user.isGuest"
                class="header-icons">more_vert
      </mat-icon>
      <mat-icon *ngIf="user.isGuest"
                svgIcon="meeting_room"
                class="header-icons"></mat-icon>
    </button>

    <button id="login-button"
            [disabled]="cookiesDisabled()"
            mat-button
            *ngIf="!user && deviceType === 'desktop'"
            (click)=login(false)
            aria-labelledby="login-label">
      <div class="label-icon">
        <mat-icon class="header-icons">person</mat-icon>
        <h2 class="oldtypo-h2"
            *ngIf="deviceType === 'desktop'">{{'header.login' | translate}}</h2>
      </div>
    </button>

    <button [disabled]="cookiesDisabled()"
            mat-icon-button
            *ngIf="!user && deviceType === 'mobile'"
            (click)=login(false)
            aria-labelledby="login-label">
      <mat-icon class="header-icons">person</mat-icon>
    </button>
  </mat-toolbar-row>
</mat-toolbar>

<div class="visually-hidden">
  <div id="login-label">{{'header.accessibility-login' | translate}}</div>
  <div id="back-label">{{'header.accessibility-back' | translate}}</div>
  <div id="session-label">{{'header.accessibility-session' | translate}}</div>
</div>
