@use "sass:math";
@use "modules/m3/style/m3-initializer" as m3-init;
@use "modules/m3/style/m3-typescale" as m3-typescale;
@import "style/fix-material-icons.scss";
@import "style/joyride-theme.scss";
@import "style/toast-ui-theme-m3.scss";
@import "style/fonts.scss";

@include m3-init.load();

html,
body {
  margin: 0;
  padding: 0;
  width: 100dvw;
  height: 100dvh;
  overflow: hidden;
  font-family: "Roboto Flex", serif;
}

.visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  overflow: hidden;
  left: -10000px;
}

$replacement: rgba(196, 188, 29, 0.5);
$deprecated-theme-override: (
  "--primary": "#{$replacement}",
  "--primary-variant": "#{$replacement}",
  "--secondary": "#{$replacement}",
  "--secondary-variant": "#{$replacement}",
  "--background": "#{$replacement}",
  "--surface": "#{$replacement}",
  "--dialog": "#{$replacement}",
  "--cancel": "#{$replacement}",
  "--alt-surface": "#{$replacement}",
  "--alt-dialog": "#{$replacement}",
  "--on-primary": "#{$replacement}",
  "--on-secondary": "#{$replacement}",
  "--on-primary-variant": "#{$replacement}",
  "--on-background": "#{$replacement}",
  "--on-surface": "#{$replacement}",
  "--on-dialog": "#{$replacement}",
  "--on-cancel": "#{$replacement}",
  "--green": "#{$replacement}",
  "--red": "#{$replacement}",
  "--white": "#{$replacement}",
  "--yellow": "#{$replacement}",
  "--blue": "#{$replacement}",
  "--purple": "#{$replacement}",
  "--magenta": "#{$replacement}",
  "--light-green": "#{$replacement}",
  "--grey": "#{$replacement}",
  "--grey-light": "#{$replacement}",
  "--black": "#{$replacement}",
  "--moderator": "#{$replacement}",
  "--questionwall-intro-primary": "#{$replacement}",
  "--questionwall-intro-secondary": "#{$replacement}",
  "--questionwall-intro-background": "#{$replacement}",
  "--livepoll-primary": "#{$replacement}",
  "--livepoll-primary--disabled": "#{$replacement}",
  "--livepoll-primary--hover": "#{$replacement}",
  "--on-livepoll-primary": "#{$replacement}",
  "--on-livepoll-primary--disabled": "#{$replacement}",
  "--on-livepoll-primary--hover": "#{$replacement}",
  "--livepoll-secondary": "#{$replacement}",
  "--livepoll-secondary--disabled": "#{$replacement}",
  "--livepoll-secondary--hover": "#{$replacement}",
  "--on-livepoll-secondary": "#{$replacement}",
  "--on-livepoll-secondary--disabled": "#{$replacement}",
  "--on-livepoll-secondary--hover": "#{$replacement}",
);

:root {
  &.theme-target {
    &.debug {
      @each $key, $value in $deprecated-theme-override {
        #{$key}: #{$value};
      }
    }
  }
}

body {
  &.border {
    * {
      $border-width: 0.1;
      box-shadow:
        inset -#{$border-width}px 0 0 0 rgba(255, 255, 0, 0.3),
        inset #{$border-width}px 0 0 0 rgba(255, 255, 0, 0.3),
        inset 0 -#{$border-width}px 0 0 rgba(0, 255, 255, 0.3),
        inset 0 #{$border-width}px 0 0 rgba(0, 255, 255, 0.3);
    }
  }
}

.default-typescale {
  h1 {
    @include m3-typescale.typescale(title, large);
  }
  h2 {
    @include m3-typescale.typescale(title, medium);
    padding-top: 1em;
  }
  h3 {
    @include m3-typescale.typescale(title, medium);
    padding-top: 1em;
  }
  h4 {
    @include m3-typescale.typescale(title, small);
  }
  h5 {
    @include m3-typescale.typescale(title, small);
  }
  h6 {
    @include m3-typescale.typescale(title, small);
  }
  p {
    @include m3-typescale.typescale(body, medium);
    hyphens: auto;
    line-height: 1.5;
  }
  /*
span {
    @include m3-typescale.typescale(body, small);
  }
  */
}

/* common layout */

.page-container {
  display: flex;
  flex-direction: column;
  width: 100%;

  > div {
    width: 800px;
    max-width: 100%;
    display: flex;
    flex-direction: column;
    align-self: center;
  }
}

.videoWrapper {
  aspect-ratio: 16 / 9;

  * {
    width: 100%;
    height: 100%;
  }
}

a {
  text-decoration: underline;
  hyphens: manual;
  color: currentColor;
}

mat-dialog-actions {
  gap: 8px;
}

/* MDC Overrides */
$min-width: 360px;
.cdk-overlay-pane.mat-mdc-dialog-panel {
  --mat-dialog-container-min-width: #{$min-width};

  &.toastui-panel {
    width: 60rem;
    max-width: calc(100dvw - 2em);
  }
}

@media (max-width: 599px) {
  .cdk-overlay-pane.mat-mdc-dialog-panel {
    --mat-dialog-container-min-width: min(
      #{$min-width},
      var(--mat-dialog-container-small-max-width, 80vw)
    );
  }
}

.error-text {
  color: var(--md-sys-color-error);
}

// Make large badges bigger
.mat-badge-large span.mat-badge-content {
  overflow: visible;
  width: auto;
}

/* Works on Firefox */
* {
  scrollbar-width: auto;
  scrollbar-color: var(--md-sys-color-outline) var(--md-sys-color-surface3);
}

$scrollbar-width: 8px;
@supports selector(::-webkit-scrollbar) {
  @property --scrollbar-color {
    syntax: "<color>";
    inherits: true;
    initial-value: transparent;
  }

  * {
    scrollbar-width: unset;
    scrollbar-color: unset;
    transition: --scrollbar-color 500ms var(--md-sys-motion-easing-emphasized);
    --scrollbar-color: transparent;
  }

  :hover,
  :focus-within,
  :focus {
    --scrollbar-color: var(--md-sys-color-outline);
  }

  /* width */
  ::-webkit-scrollbar {
    width: #{$scrollbar-width};
    height: #{$scrollbar-width};
  }

  /* Track */
  ::-webkit-scrollbar-track {
    background: transparent;
  }

  /* Handle */
  ::-webkit-scrollbar-thumb {
    box-shadow: inset 0 0 0 #{math.div($scrollbar-width, 2) + 1px} var(--scrollbar-color);
    border-radius: #{math.div($scrollbar-width, 2)};
    background-clip: padding-box;
  }

  ::-webkit-scrollbar-corner {
    background: transparent;
  }
}

.mat-mdc-card-title,
.mat-mdc-card-subtitle {
  padding-bottom: 0.3em;
}

ol,
ul {
  hyphens: auto;
}

.fillable-icon {
  transition: font-variation-settings 250ms
    var(--md-sys-motion-easing-emphasized);
  --fill-state: 0;
  font-variation-settings: "FILL" var(--fill-state, 0);
}

.filled {
  --fill-state: 1;
}

.contained-icon.mat-mdc-icon-button {
  --mdc-icon-button-icon-color: var(--md-sys-color-secondary);
  --mdc-icon-button-button-color: var(--md-sys-color-secondary-container);
  background-color: var(--mdc-icon-button-button-color);

  &.primary {
    --mdc-icon-button-icon-color: var(--md-sys-color-primary);
    --mdc-icon-button-button-color: var(--md-sys-color-primary-container);
  }
}
