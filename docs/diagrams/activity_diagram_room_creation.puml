@startuml Room Creation
title frag.jetzt | Room Creation Workflow

skinparam backgroundColor Linen
skinparam shadowing true
skinparam defaultFontSize 14
skinparam defaultFontName Times New Roman
skinparam Padding 6

' Additional skinparam settings
skinparam roundcorner 50
skinparam arrowColor DarkBlue
skinparam arrowThickness 1.5
skinparam LegendBackgroundColor White
skinparam LegendBorderThickness 0

start
:Click on »Create a Room«;
' New decision: User Registration
if (Is the user registered and logged in?) then (yes)

  ' New decision: Activation Code or API Key
  if (Has activation code for ChatGPT?) then (yes)
    :Enter activation code;
    :Activate ChatGPT;
  else if (Has API key with Organization Id?) then (yes)
    :Enter API key with Organization Id;
    :Activate ChatGPT;
  else (no)
  endif
  note right
    If ChatGPT is already enabled for this user, skip to role decision.
  end note
else (no)
  :Prompt user to register if they want to use ChatGPT;
endif

' Decision: Role
if (1. Role?) then (Teacher)
  :Enter event name;
  ' Decision: Key Code Generation
  if (2. Generate key code?) then (yes)
    :Generate key code;
  else (no)
    :Enter memorable key code;
  endif
  ' Decision: Configuration Type
  if (3. Configuration type?) then (Standard)
    :Apply standard configuration;
    :Create Q&A room;
  else (Custom)
    ' Decision: ChatGPT Setup
    if (4. Can user set up ChatGPT?) then (yes)
      ' Decision: ChatGPT Availability
      if (5. Enable ChatGPT for Q&A forum?) then (yes)
        :Activate »Let ChatGPT answer questions«;
        ' Additional Decision: »AI StudyBuddy«
        if (6. Create »AI StudyBuddy«?) then (yes)
          :Create »AI StudyBuddy«;

          ' New query: ChatGPT Access
          if (7. Who can use ChatGPT?) then (only teacher and moderators)
            :Restrict access to teacher and moderators;
          else (also students)
            :Grant access to students;
          endif

        endif
      else (no)
      endif
    else (no)
    endif
    ' Decision: Q&A Forum Moderation
    if (8. Moderate Q&A forum?) then (yes)
      :Activate moderation;
    else (no)
      :Allow all posts without moderation;
    endif
    ' Decision: Profanity Filter
    if (9. Enable profanity filter?) then (yes)
      :Activate profanity filter;
    else (no)
      :Deactivate profanity filter;
    endif
    ' Decision: Keyword Generation
    if (10. Generate keywords from posts?) then (yes)
      :Activate keyword generation;
    else (no)
      :Deactivate keyword generation;
    endif

    ' Decision: Flash Polls
    if (11. Enable Flash Polls?) then (yes)
      :Activate Flash Polls;
    else (no)
      :Deactivate Flash Polls;
    endif
    ' Decision: Bonus Archive
    if (12. Enable bonus archive?) then (yes)
      :Activate bonus archive;
    else (no)
      :Deactivate bonus archive;
    endif
    ' Decision: Quiz Module
    if (13. Enable quiz module?) then (yes)
      :Activate quiz module;
    else (no)
      :Deactivate quiz module;
    endif
    ' Decision: Brainstorming Module
    if (14. Enable brainstorming module?) then (yes)
      :Activate brainstorming module;
    else (no)
      :Deactivate brainstorming module;
    endif
    ' Decision: Topic Radar Module
    if (15. Enable Topic Radar module?) then (yes)
      :Activate Topic Radar module;
    else (no)
      :Deactivate Topic Radar module;
    endif
    ' Decision: Topic Focus Module
    if (16. Enable Topic Focus module?) then (yes)
      :Activate Topic Focus module;
    else (no)
      :Deactivate Topic Focus module;
    endif
    :Create Q&A room;
  endif
else (Student)
  :Enter study room name;
  ' Decision: Key Code Generation
  if (2. Generate key code?) then (yes)
    :Generate key code;
  else (no)
    :Enter memorable key code;
  endif
  ' Decision: Configuration Type
  if (3. Configuration type?) then (Standard)
    :Apply standard configuration;
    :Create study room;
  else (Custom)
    ' Further decisions for custom configuration
    ' Decision: ChatGPT Setup
    if (4. Can user set up ChatGPT?) then (yes)
      ' Decision: ChatGPT Availability
      if (5. Enable ChatGPT for Q&A forum?) then (yes)
        :Activate »Let ChatGPT answer questions«;
        ' Additional Decision: »AI StudyBuddy«
        if (6. Create »AI StudyBuddy«?) then (yes)
          :Create »AI StudyBuddy«;
        endif
      else (no)
      endif
    else (no)
    endif
    ' Decision: Keyword Generation
    if (7. Generate keywords from posts?) then (yes)
      :Activate keyword generation;
    else (no)
      :Deactivate keyword generation;
    endif
    ' Decision: Topic Radar Module
    if (8. Enable Topic Radar module?) then (yes)
      :Activate Topic Radar module;
    else (no)
      :Deactivate Topic Radar module;
    endif
    ' Decision: Topic Focus Module
    if (9. Enable Topic Focus module?) then (yes)
      :Activate Topic Focus module;
    else (no)
      :Deactivate Topic Focus module;
    endif
    ' Decision: Brainstorming Module
    if (10. Enable brainstorming module?) then (yes)
      :Activate brainstorming module;
    else (no)
      :Deactivate brainstorming module;
    endif
    :Create study room;
  endif
endif

stop

legend right
|<img:https://git.thm.de/arsnova/frag.jetzt/-/raw/staging/src/assets/icons/chat_bot_green.png{scale=0.4}> |= \n\n »frag.jetzt« Room Creation Workflow |
| Domain glossary | [[https://git.thm.de/arsnova/frag.jetzt/-/raw/staging/docs/diagrams/Glossary.pdf]] |
| Production server | [[https://frag.jetzt]] |
| Repository | [[https://git.thm.de/arsnova/frag.jetzt/-/blob/staging/README.md]] |
| Staging server | [[https://staging.frag.jetzt]] |
| UML tool| PlantUML v2.17.5|
| Author| Klaus Quibeldey-Cirkel|
| Contact| [[mailto:klaus.quibeldey-cirkel@mni.thm.de]] |
| Last revision| 11/29/2023 |
end legend

@enduml
